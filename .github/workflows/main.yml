# 이 워크플로의 이름
# GitHub Actions 탭에서 보이는 이름이다
name: git-action-tutorial

# 워크플로가 언제 실행될지 정의하는 부분 (트리거)
on:
  # push 이벤트가 발생했을 때 실행
  # 즉, 누군가 이 저장소에 push 하면 실행된다
  push:

# 실제로 실행될 작업(job) 정의
jobs:
  # job 이름 (아무 이름이나 가능)
  # 하나의 가상머신에서 실행되는 작업 단위
  pikacu-git-action-basic-test:
    # job을 실행할 환경
    # GitHub에서 제공하는 Ubuntu 가상머신을 사용
    runs-on: ubuntu-latest

    # job 안에서 순서대로 실행될 단계들
    steps:
      # step1: 현재 GitHub 저장소의 코드를 가져온다
      # 가상머신은 처음에 비어있기 때문에 반드시 필요
      - name: step1 저장소 코드 가져오기
        uses: actions/checkout@v4

      # step2: Python 실행 환경을 설치한다
      # 여기서는 Python 3.11 버전을 사용
      - name: step2 Python 설치
        uses: actions/setup-python@v5
        with:
          python-version: '3.11'

      # step3: pytest 설치
      # 테스트를 실행하기 위해 pytest 패키지를 설치한다
      - name: step3 pytest 설치
        run: pip install pytest

      # step4: 테스트 코드 실행
      # test_basic_ci.py 파일을 pytest로 실행한다
      # 테스트가 실패하면 이 job은 실패 상태가 된다
      - name: step4 CI 기본 테스트 실행
        run: pytest test_basic_ci.py
